<form class="form-inline form-group-sm" novalidate (ngSubmit)="onSubmit()" [formGroup]="searchForm">
  <div class="container-fluid">
  <div class="row">
    <div class="col-md-8 col-lg-9">
    <div class="card">
        <div class="card-heading" *ngIf="selectedToolID > '0'"><h6>Tool {{selectedToolID}}</h6></div>
        <div class="card-heading" *ngIf="selectedToolID == '0'"><h6>New Tool</h6></div>
        <div class="card-block">

    <div class="row card-row">
        <div class="pb-1 pr-1">
            <div class="text-center bg-primary col-md">1 Code</div>
            <input formControlName="code"
                [value]="selectedCode" (input)="selectedCode = $event.target.value"
                [typeahead]="codeDataSource"
                [typeaheadOptionsLimit]="10"
                typeaheadOptionField="Text"      
                [typeaheadMinLength]="0"  
                class="form-control"
                (keyup.tab)="selectedCode = $event.target.value;
                        getSelectedCodeColumns()"
                  (blur)="selectedCode = $event.target.value;
                  getSelectedCodeColumns()">

        </div>
      <div class="pb-1 pr-1" [class.d-none]="hideColumn('mwCategoryID')">
          <div class="text-center bg-heading col-md">2 Category</div>
              <input formControlName="category"
              [value]="selectedCategory" (input)="selectedCategory = $event.target.value;"
              [typeahead]="categoryDataSource"
              [typeaheadOptionsLimit]="10"
              typeaheadOptionField="Text"      
              [typeaheadMinLength]="0"  
              (typeaheadOnSelect)="typeaheadOnSelect('categoryID', $event.item.Value)"
              class="form-control">
              <input type="hidden" formControlName="categoryID" />
        </div>
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('ToolGroupNum')">
          <div class="text-center bg-heading col-md">3 Groups</div>
          <div><input class="form-control input-sm" type="text" formControlName="groups" /></div>
        </div>
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('mwVendorID')">
            <div class="text-center bg-heading col-md">4 Vendor Item#</div>
            <div><input class="form-control input-sm"  type="text" formControlName="vendorItem" /></div>
        </div>
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('mwName')">
            <div class="text-center bg-heading col-md">5 Name</div>
                <input formControlName="name"
                [value]="selectedName" (input)="selectedName = $event.target.value"
                [typeahead]="nameDataSource"
                [typeaheadOptionsLimit]="10"
                typeaheadOptionField="Text"      
                [typeaheadMinLength]="0"  
                class="form-control">
        </div> 
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('Description')">
            <div class="text-center bg-heading col-md">6 Description</div>
            <div><input class="form-control input-sm" type="text" formControlName = "description" id="inputDescription" ></div>
          </div>
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('mwExtLocation')">
            <div class="text-center bg-heading col-md">7 External Location</div>
                <input formControlName="externalLocation"
                [value]="selectedExternalLocation" (input)="selectedExternalLocation = $event.target.value"
                [typeahead]="externalLocationDataSource"
                [typeaheadOptionsLimit]="10"
                typeaheadOptionField="Text"      
                [typeaheadMinLength]="0"  
                class="form-control">
        </div>
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('mwStatusID')">
            <div class="text-center bg-heading col-md">8 Status</div>
                <input formControlName="status"
                [value]="selectedStatus" (input)="selectedStatus = $event.target.value"
                [typeahead]="statusDataSource"
                [typeaheadOptionsLimit]="10"
                typeaheadOptionField="Text"      
                [typeaheadMinLength]="0"  
                (typeaheadOnSelect)="typeaheadOnSelect('statusID', $event.item.Value)"
                class="form-control"
                />
                <input type="hidden" formControlName="statusID" />
        </div>
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('isLocked')">
            <div class="text-center bg-heading col-md">9 Locked</div>
            <div class="border text-center rounded-bottom" style="height: 38px; width:200px">
              <input formControlName="isLocked" type="checkbox" id="isLocked"/>
            </div>
        </div>
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('onHand')">
            <div class="text-center bg-heading col-md">10 On Hand</div>
            <div>
              <input formControlName="onHand" type="text" id="onHand" class="form-control input-sm" />
            </div>
        </div>
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('manufacturerItem')">
          <div class="text-center bg-heading col-md">11 Manufacturer Item#</div>
          <div><input class="form-control input-sm" type="text" formControlName = "manufacturerItem" ></div>
        </div>
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('mwVendorID')">
          <div class="text-center bg-heading col-md">12 Vendor Name</div>
              <input formControlName="vendorName"
              [value]="selectedVendorName"
              [typeahead]="vendorNameDataSource"
              [typeaheadOptionsLimit]="10"
              typeaheadOptionField="Value"      
              [typeaheadMinLength]="0"  
              class="form-control">
        </div>
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('mwLocation')">
          <div class="text-center bg-heading col-md">13 Location</div>
              <input formControlName="location"
              [value]="selectedLocation" (input)="selectedLocation = $event.target.value"
              [typeahead]="locationDataSource"
              [typeaheadOptionsLimit]="10"
              typeaheadOptionField="Value"      
              [typeaheadMinLength]="0"  
              class="form-control">
        </div>
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('mwOrderPoint')">
          <div class="text-center bg-heading col-md">14 Order Point</div>
          <div><input class="form-control input-sm" type="number" formControlName = "orderPoint" ></div>
        </div>
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('mwInvLevel')">
          <div class="text-center bg-heading col-md">15 Inventory Level</div>
          <div><input class="form-control input-sm" type="number" formControlName = "inventoryLevel" ></div>
        </div>
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('mwUnitPrice')">
          <div class="text-center bg-heading col-md">16 Unit Price ($/pack)</div>
          <div><input class="form-control input-sm" type="text" formControlName = "unitPrice" ></div>
        </div>
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('PackSize')">
          <div class="text-center bg-heading col-md">17 Pack Size</div>
          <div><input class="form-control input-sm" type="number" formControlName = "packSize" ></div>
        </div>
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('mwImageCode')">
          <div class="text-center bg-heading col-md">18 Image</div>
          <div><input class="form-control input-sm" type="text" formControlName = "imageCode" ></div>
        </div>
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('mwManufacturer')">
          <div class="text-center bg-heading col-md">19 Manufacturer Name</div>
              <input formControlName="manufacturer"
              [value]="selectedManufacturerName" (input)="selectedManufacturerName = $event.target.value"
              [typeahead]="manufacturerNameDataSource"
              [typeaheadOptionsLimit]="10"
              typeaheadOptionField="Value"      
              [typeaheadMinLength]="0"  
              class="form-control">
        </div>
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('MachineNumber')">
          <div class="text-center bg-heading col-md">20 Machine#</div>
              <input formControlName="machineNumber"
              [value]="selectedMachineNumber" (input)="selectedMachineNumber = $event.target.value"
              [typeahead]="machineNumberDataSource"
              [typeaheadOptionsLimit]="10"
              typeaheadOptionField="Value"      
              [typeaheadMinLength]="0"  
              class="form-control">
        </div>    
      
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('StationNumber')">
          <div class="text-center bg-heading col-md">21 Station#</div>
              <input formControlName="stationNumber"
              [value]="selectedStationNumber" (input)="selectedStationNumber = $event.target.value"
              [typeahead]="stationNumberDataSource"
              [typeaheadOptionsLimit]="10"
              typeaheadOptionField="Value"      
              [typeaheadMinLength]="0"  
              class="form-control">
        </div>    
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('mwComment')">
          <div class="text-center bg-heading col-md">22 Comment</div>
          <div><input class="form-control input-sm"  type="text" formControlName="comment" /></div>
        </div>
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('CuttingMethod')">
          <div class="text-center bg-heading col-md">23 Cutting Methods</div>
              <input formControlName="cuttingMethods"
              [value]="selectedCuttingMethods" (input)="selectedCuttingMethods = $event.target.value"
              [typeahead]="cuttingMethodsDataSource"
              [typeaheadOptionsLimit]="10"
              typeaheadOptionField="Value"      
              [typeaheadMinLength]="0"  
              class="form-control">
        </div>    
  
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('mwMaterial')">
          <div class="text-center bg-heading col-md">24 Material</div>
              <input formControlName="material"
              [value]="selectedMaterial" (input)="selectedMaterial = $event.target.value"
              [typeahead]="materialDataSource"
              [typeaheadOptionsLimit]="10"
              typeaheadOptionField="Value"      
              [typeaheadMinLength]="0"  
              class="form-control">
        </div>    
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('mwGrade')">
          <div class="text-center bg-heading col-md">25 Grade</div>
              <input formControlName="grade"
              [value]="selectedGrade" (input)="selectedGrade = $event.target.value"
              [typeahead]="gradeDataSource"
              [typeaheadOptionsLimit]="10"
              typeaheadOptionField="Value"      
              [typeaheadMinLength]="0"  
              class="form-control">
        </div>    
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('mwId')">
          <div class="text-center bg-heading col-md">26 MWID</div>
          <div><input class="form-control input-sm" type="text" formControlName="mwID" ></div>
        </div>    
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('mwRadius')">
            <div class="text-center bg-heading col-md">27 Radius</div>
            <div><input class="form-control input-sm" type="text" formControlName = "radius" id="inputRadius" ></div>
          </div> 
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('mwWidth')">
          <div class="text-center bg-heading col-md">28 Width</div>
          <div><input class="form-control input-sm" type="text" formControlName = "width" ></div>
        </div>    
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('mwNumofCutter')">
          <div class="text-center bg-heading col-md">29 # of Cutter</div>
          <div><input class="form-control input-sm" type="text" formControlName = "numOfCutters" ></div>
        </div>    
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('mwDiameter')">
          <div class="text-center bg-heading col-md" title="Cutting Diameter">30 Diameter</div>
          <div><input class="form-control input-sm" type="text" formControlName = "Diameter" ></div>
        </div>    
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('mwShankDia')">
          <div class="text-center bg-heading col-md">31 Shank Diameter</div>
          <div><input class="form-control input-sm" type="text" formControlName = "shankDiameter" ></div>
        </div>    
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('NeckDiameter')">
          <div class="text-center bg-heading col-md">32 Neck Diameter</div>
          <div><input class="form-control input-sm" type="text" formControlName = "neckDiameter" ></div>
        </div>    
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('mwFluteLength')">
          <div class="text-center bg-heading col-md">33 Flute Length</div>
          <div><input class="form-control input-sm" type="text" formControlName = "fluteLength" ></div>
        </div>    
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('LBS')">
          <div class="text-center bg-heading col-md">34 LBS (Reach)</div>
          <div><input class="form-control input-sm" type="text" formControlName = "lbs" ></div>
        </div>    
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('mwOAL')">
          <div class="text-center bg-heading col-md">35 O.A.L</div>
          <div><input class="form-control input-sm" type="text" formControlName = "oal" ></div>
        </div>    
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('mwNumofFlutes')">
          <div class="text-center bg-heading col-md">36 # of Flutes</div>
          <div><input class="form-control input-sm" type="text" formControlName = "numOfFlutes" ></div>
        </div>    
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('mwAngle')">
          <div class="text-center bg-heading col-md">37 Angle</div>
          <div><input class="form-control input-sm" type="text" formControlName = "angle" ></div>
        </div>    
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('mwMaxDepthofCut')">
          <div class="text-center bg-heading col-md">38 Max Depth Cut</div>
          <div><input class="form-control input-sm" type="text" formControlName = "maxDepthOfCut" ></div>
        </div>    
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('mwChipBreaker')">
          <div class="text-center bg-heading col-md">39 Chip Breaker</div>
          <div><input class="form-control input-sm" type="text" formControlName = "chipBreaker" ></div>
        </div>    
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('mwDirection')">
          <div class="text-center bg-heading col-md">40 Direction</div>
          <div><input class="form-control input-sm" type="text" formControlName = "direction" ></div>
        </div>    
        <div class="pb-1 pr-1" [class.d-none]="hideColumn('mwMaterial')">
          <div class="text-center bg-heading col-md">41 Material Recommended</div>
          <div><input class="form-control input-sm" type="text" formControlName = "materialRecommended" ></div>
        </div>   
    
    </div> 
  </div>
  <div class="card-block">
      <div class="row card-row">
              <div>
                <button type="button" class="btn btn-primary mr-1" [class.d-none]="selectedCode==''" (click)="saveToolDetails();">Save</button>
                <button type="button" class="btn btn-primary mr-1" [class.d-none]="selectedToolID=='0'" (click)="copyTool()">Clone</button>
                <button type="button" class="btn btn-primary mr-1" [class.d-none]="selectedToolID=='0'" (click)="addNew()">Add New</button>
                <button type="button" class="btn btn-primary mr-1"  onclick="window.location.href ='/searchtoolinventory'" >Cancel</button>
              </div> 
              <div><h5>{{message}}</h5></div>
        </div> 
      </div>
          
    </div>
    </div>
    <!--Image column-->
    <div class="col-md-4 col-lg-3">
        <div class="col-md-12"  [class.d-none]="selectedToolID=='0'">
            <div class="card">
                <div class="card-heading"><h6>Image</h6></div>
                <div class="card-block">
                    <div class="row text-center">
                        <div class="col-sm p-2">
                          <img id='toolImage' style="height: 160px; border-radius: 50px;" [src]='toolImagePath' onerror="this.src = './assets/images/no_image.svg'"
                          />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm mx-2">
                            <file-drop headertext="Drop image here" (onFileDrop)="dropped($event)" 
                                  (onFileOver)="fileOver($event)" (onFileLeave)="fileLeave($event)" *ngIf='!staticDropped'>           
                            </file-drop> 
                            <img style="height: 160px; border-radius: 0px;" src='' id='uploadedImage' /> 
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--Tool Holder-->
        <div class="col-md-12 mt-2"  [class.d-none]="selectedToolID=='0'">
            <div class="card">
                <div class="card-heading">
                  <div class="float-left"><h6>Tool Holder - </h6></div>
                  <div class="float-left" *ngIf="searchResult.LinkedTools != null">({{searchResult.LinkedTools.length}} Total)({{selectedToolHolder.length}} Selected)</div>
                </div>
                <div class="card-block">
                  <div class="divWithScroll">
                    <div *ngFor="let option of searchResult.LinkedTools">
                        <label>
                            <input type="checkbox"
                              name="linkedTools"
                              value="{{option.ID}}"
                              (change)="updateCheckedOptions(option.ID, $event)"/>
                            <div class="text-truncate"><a href="./tooldetail/{{option.ID}}" target="_blank" > {{option.Description}}</a></div> 
                        </label>
                    </div>
                  </div>
                    <button type="button" class="btn btn-secondary mr-1" (click)="openWin()" >Add</button>
                    <button type="button" class="btn btn-secondary mr-1" [class.d-none]="selectedToolHolder.length == 0" (click)="unlinkTool()">Remove</button>
                  </div>
                </div>
        </div>
  </div>


  </div>


    <!--div class="card"  [class.d-none]="selectedToolID==0">
        <div class="card-heading">Linked Tools</div>
        <div class="card-block">
            <div class="row" >
                <div *ngFor="let tool of searchResults.LinkedTools"  class="col-md-3 bg-light mr-1 mb-1 text-nowrap pop">
                  <h6 class="text-primary"><small>{{ tool.Description }}</small></h6>
                  <small>
                    <div>ID:{{ tool.ID }}</div>
                  </small>
                <div>{{ tool.imagePath }}</div>
              </div> 
              </div>
            </div>
    </div-->
     
        
        
      
<!-- <p>Form value {{ searchForm.value | json }} </p>
<p> Form status {{ searchForm.status | json}} </p> -->
</div>  
</form>
